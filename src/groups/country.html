[% 
   WRAPPER layout title = "Perl Mongers: $continent"
   onload="initialize"
   onunload="GUnload"
%]

<script type="text/javascript">
var zoom = 10;
var coords = [

[% IF country == 'United States of America' %]
  [% FOREACH state = groups.keys.sort %]
    [% FOREACH group = groups.$state %]
      [ [% group.latitude %], [% group.longitude %] ],
    [% END %]
  [% END %]
[% ELSE %]
    [% FOREACH group = groups %]
      [ [% group.latitude %], [% group.longitude %] ],
    [% END %]
[% END %]
];
</script> 

<div id="map-canvas" style="width: 500px; height: 400px"></div>

[% IF groups.size %]

<p>The following groups are in [% country %], <a href="[% continent_link %]">[% continent %]</a>:</p>

[% IF country == 'United States of America' %]
  [% FOREACH state = groups.keys.sort %]
  <h3>[% state %]</h3>
  <ul>
    [% FOREACH group = groups.$state %]
      <li><a href="[% group.id %].html">[% group.name | html_entity %]</a></li>
    [% END %]
  </ul>
  [% END %]
[% ELSE %]
  <ul>
    [% FOREACH group = groups %]
      <li><a href="[% group.id %].html">[% group.name | html_entity %]</a></li>
    <!--  <li><a href="[% group.web %]">[% group.name | html_entity %]</a> (<a href="[% group.id %].html">?</a>)</li> -->
    [% END %]
  </ul>
[% END %]

[% ELSE %]
<p>There are currently no groups in [% continent %].</p>
[% END %]

[% END %]
